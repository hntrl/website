---
import type { CollectionEntry } from "astro:content";

import Metadata from "../components/Metadata.astro";
import PageLayout from "./PageLayout.astro";
import BlogPostLD from "../components/BlogPostLD.astro";

interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;

const formatDate = (date: string) =>
  new Date(date).toLocaleDateString("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
  });
---

<PageLayout title={post.data.title}>
  <BlogPostLD slot="head" {...post.data} />
  <Metadata
    slot="head"
    title={post.data.title}
    description={post.data.description}
    canonicalUrl={`${import.meta.env.SITE}/posts/${post.slug}/`}
    publishDate={post.data.publishDate}
    type="article"
  />
  <article class="prose prose-invert max-w-none">
    <header class="py-8 pb-8 border-b border-zinc-800">
      <h1 class="text-3xl md:text-4xl mb-6 lg:text-5xl font-bold">
        {post.data.title}
      </h1>
      <div class="alt-text mb-4 text-zinc-400 text-xs md:text-sm lg:text-base">
        {formatDate(post.data.publishDate)}
      </div>
      <div class="text-zinc-400 text-xs md:text-sm lg:text-base">
        {post.data.description}
      </div>
    </header>
    <div class="prose prose-invert max-w-none">
      <slot />
    </div>
  </article>
</PageLayout>
